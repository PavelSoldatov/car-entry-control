# Документация к API

### REST c префиксом /ui(пользовательские методы)

Данные методы предназначены для сотрудников предприятия, которые осуществляют администрование зоны вьезда/выезда(создание, удаление, заполнение информации закрепленной за rfid меткой), просмотр журнала событий(создание, изменение, блокировка rfid меток).

Охранникам будет доступна функция принудительного открытия шлагбаума(для кейса, когда rfid метку не удалось считать), просмотр журнала событий(вьезд, выезд).

---

### Методы для пользователя с ролью Администратор-Rfid
#### Создание автомобиля - `POST /ui/car/create`
данный метод создает новую сущность автомобиля, которую впоследствии можно будет привязать к *rfid-метке*.

**Список параметров:**
```json
{
  "carColour": "string",
  "carModel": "string",
  "governmentNumber": "string"
}
```
**Формат ответа:**
```sh
без параметров
```
**Статус:**
```sh
при успешном отрабатывании - HttpStatus.OK
```
#### Привязка ранее созданой rfid-метки к существующему автомобилю - `POST ui/car/create`
данный метод создает связку сущности *rfid* с сущностью *car*. он необходим для того чтобы в момент проезда автомобиля, при считывании *rfid-метки*, можно было проверить данные автомобиля(гос номер). Без связки это будет невозможно сделать, также после создания такой связки *rfid-метка* переходит в статус **ACTIVE**.

**Список параметров:**
```json
{
  "carId": long,
  "rfidId": long,
}
```
**Формат ответа:**
```sh
без параметров
```
**Статус:**
```sh
при успешном отрабатывании - HttpStatus.NO_CONTENT
```
#### блокировка rfid метки  - `POST ui/rfid/blockRfid/{rfidId}`
данный метод нужен для временной(когда водитель находится на больничном или в отпуске) или постоянной блокировки(на случай когда rfid метка начала работать некорректно) ранее созданной rfid метки.

**Список параметров:**
```json
rfidId - long (передается через строку url)
```
**Формат ответа:**
```sh
без параметров
```
**Статус:**
```sh
при успешном отрабатывании - HttpStatus.NO_CONTENT
```
---

### Методы для пользователя с ролью Оператор зоны въезда

#### принудительное открытие шлагбаума  - `POST ui/forceOpen`

данный метод нужен для принудительного открытия шлагбаума. на фронте скорей всего будет схемка, с расположением шлагбаумов(нужно продумать этот момент), охранник выбирает нужный шлагбаум, далее открывается форма, где он заполняет номер проезжающего автомибиля и тип события(вьезд или выезд).

**Список параметров:**
```json
gosNumber - string (передается через строку url)
deviceNumber - string
eventType - string
```
**Формат ответа:**
```sh
без параметров
```
**Статус:**
```sh
при успешном отрабатывании - HttpStatus.NO_CONTENT
```
---
### Общие методы для пользователей с ролями (Оператор зоны въезда и Администратор rfid-меток)
#### просмотр журнала произошедших событий  - `GET ui/rfid/entryEvents`
данный метод позволяет получать список произошедших событий.
**Список параметров:**
```json
без параметров
```
**Формат ответа:**
```sh
на стадии проработки
```
**Статус:**
```sh
при успешном отрабатывании - HttpStatus.OK
```
### Технические методы
#### просмотр журнала произошедших событий  - `GET /topic/newrfidlabel`

данный метод работает по принципу sub и pub при создании новой rfid метки, он оповещает пользователя о том, что появилась новая метка и ее необходимо дозаполнить нужной информацией, прикрепить к существующему автомобилю, для того чтобы перевести в рабочее состояние.

---

### Общие требования к ui(frontend)
1. необходимо сделать точку входа(форму для ввода логина и пароля)
2. концепция должна быть построена по принципу, который в дальнейшем позволит без проблем расширить как текущий функционал, так и добавить новый модуль(другой блока функционала не относящегося к rfid меткам)
3. личный кабинет на данном этапе прорабатывать не нужно, достаточно простого отображение в углу с ролью пользователя.

### методы которые находятся в проработке
1. удаление, просмотр созданных автомобилей(для роли Администратор rfid).
2. просмотр списка rfid-меток.